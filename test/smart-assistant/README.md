# 智慧語音助手測試說明

## 測試環境設定

### 1. 啟動測試伺服器
```bash
# 在專案根目錄執行
python3 -m http.server 8000
```

### 2. 開啟測試頁面
- **載入測試**: http://localhost:8000/test/smart-assistant/test-loading.html
- **完整智慧助手**: http://localhost:8000/test/smart-assistant/index.html

## 功能測試檢查清單

### 初始化測試
- [ ] 頁面載入後自動開始初始化
- [ ] 請求麥克風權限
- [ ] 所有服務成功初始化（VAD、喚醒詞、STT、計時器）
- [ ] 服務狀態指示器顯示綠色（就緒）
- [ ] WebGPU 狀態顯示（如果支援）

### 喚醒詞測試
- [ ] 說 "Hey Jarvis" 喚醒助手
- [ ] 或點擊「喚醒」按鈕手動喚醒
- [ ] 狀態從「閒置」變為「聆聽中」
- [ ] 狀態指示器從灰色變為綠色

### 語音識別測試
- [ ] 喚醒後開始說話
- [ ] 即時識別顯示在「即時識別」區域
- [ ] 最終結果顯示在「最終結果」區域
- [ ] 中文語音識別正確

### VAD 測試
- [ ] 說話時 VAD 狀態顯示「檢測到語音」
- [ ] 停止說話時 VAD 狀態顯示「靜音」
- [ ] 音訊視覺化圖表顯示音波

### 計時器測試
- [ ] 停止說話後靜音計時器開始倒數
- [ ] 重新說話時計時器重置
- [ ] 計時器歸零後自動回到閒置狀態
- [ ] 最大聆聽時間計時器正常運作

### 手動控制測試
- [ ] 「喚醒」按鈕可手動啟動聆聽
- [ ] 「休眠」按鈕可手動停止聆聽
- [ ] 設定滑桿可調整敏感度和超時時間
- [ ] 清除日誌按鈕可清空事件日誌

## 常見問題排解

### 1. WebASRCore 未載入
- 檢查網路連線
- 確認 CDN 可訪問：https://unpkg.com/web-asr-core@0.8.1/dist/web-asr-core.min.js
- 查看瀏覽器控制台錯誤

### 2. 麥克風權限被拒絕
- 在瀏覽器設定中允許麥克風權限
- 確保使用 HTTPS 或 localhost
- 重新整理頁面並允許權限

### 3. 喚醒詞無反應
- 調整喚醒詞敏感度（降低閾值）
- 確保麥克風音量足夠
- 檢查 VAD 是否正常檢測語音

### 4. 語音識別不準確
- 確保說話清晰
- 降低背景噪音
- 調整 VAD 敏感度

### 5. 服務初始化失敗
- 檢查瀏覽器支援（建議使用 Chrome/Edge）
- 查看控制台詳細錯誤訊息
- 確認模型檔案載入正常

## 瀏覽器相容性

| 瀏覽器 | 支援度 | 備註 |
|--------|--------|------|
| Chrome 90+ | ✅ 完整支援 | 推薦使用 |
| Edge 90+ | ✅ 完整支援 | 推薦使用 |
| Firefox 90+ | ⚠️ 部分支援 | Web Speech API 限制 |
| Safari 15+ | ⚠️ 實驗性支援 | 可能有限制 |

## 效能優化建議

1. **啟用 WebGPU**（如果可用）
   - 可提供 2-10x 加速
   - 檢查 WebGPU 狀態指示器

2. **調整敏感度**
   - VAD: 0.3-0.5（較敏感）
   - 喚醒詞: 0.5-0.7（平衡）

3. **調整超時設定**
   - 靜音超時: 3-5 秒
   - 最大聆聽: 20-30 秒

## 開發除錯

### 查看日誌
1. 開啟瀏覽器開發者工具（F12）
2. 查看 Console 標籤頁
3. 所有操作都會記錄詳細日誌

### 監控網路
1. 在開發者工具中選擇 Network 標籤
2. 觀察模型檔案載入狀況
3. 確認所有資源載入成功

### 檢查服務狀態
頁面底部的狀態列顯示各服務即時狀態：
- 灰色圓圈：未初始化
- 黃色圓圈：載入中
- 綠色圓圈：就緒
- 紅色圓圈：錯誤